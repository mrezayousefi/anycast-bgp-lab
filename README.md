# ๐ Anycast + BGP Simulation with Docker & FRRouting

ุงู ูพุฑูฺู ฺฉ ูุญุท ุดุจูโุณุงุฒโุดุฏู ุจุฑุง ุงุฏฺฏุฑ ู ุชุณุช **Anycast IP** ููุฑุงู ุจุง **BGP Routing** ุจู ฺฉูฺฉ ุงุจุฒุงุฑูุง **Docker** ู **FRRouting (FRR)** ุงุณุช.

## ๐งฉ ุณูุงุฑู

```
                      +------------------+
                      |     Client       |
                      |  (Docker Node)   |
                      +--------+---------+
                               |
                        Routed to Anycast IP
                               |
        +----------------------+----------------------+
        |                                             |
+---------------+                           +----------------+
|  Router 1     |                           |  Router 2      |
|  (FRRouting)  |                           |  (FRRouting)   |
+------+--------+                           +--------+-------+
       |                                             |
+------v------+                              +-------v------+
|  Web Server 1|                              | Web Server 2 |
|   (NGINX)    |                              |   (NGINX)    |
+-------------+                              +--------------+

Both Web Servers have the same Anycast IP.
```

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
anycast-bgp-lab/
โโโ dockerfile/            # ุณุงุฎุช image nginx
โ   โโโ Dockerfile
โ   โโโ start.sh
โโโ client/                # ฺฉูุงูุช ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช HTTP
โ   โโโ docker-compose.yml
โโโ nginx/                 # ุดุงูู ุฏู ูุจโุณุฑูุฑ ุจุง IP ูุดุชุฑฺฉ
โ   โโโ docker-compose.yml
โ   โโโ web1/
โ   โ   โโโ html/index.html
โ   โ   โโโ nginx.conf
โ   โโโ web2/
โ       โโโ html/index.html
โ       โโโ nginx.conf
โโโ routers/               # ุดุงูู ุฏู ุฑูุชุฑ BGP ุจุง FRRouting
    โโโ docker-compose.yml
    โโโ router1/
    โ   โโโ frr.conf
    โ   โโโ daemons
    โ   โโโ vtysh.conf
    โโโ router2/
        โโโ frr.conf
        โโโ daemons
        โโโ vtysh.conf
```

## โ๏ธ ูพุดโูุงุฒูุง

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- ุขุดูุง ููุฏูุงุช ุจุง networkingุ BGP ู ููุงูู Anycast

## ๐ ูุญูู ุงุฌุฑุง

### 0. ุณุงุฎุช ุงูุฌ NGINX ุจุง ูุงู `nginxnew`

ูุจู ุงุฒ ุงุฌุฑุง ฺฉุงููพูุฒโูุงุ ุงุจุชุฏุง ุจุงุฏ ฺฉ ุงูุฌ NGINX ุงุฎุชุตุงุต ุจุง ูุงู `nginxnew` ุจุณุงุฒุฏ. ุงู ุงูุฌ ุจุฑุง ุฑุงูโุงูุฏุงุฒ ูุจโุณุฑูุฑูุง Anycast ุงุณุชูุงุฏู ูโุดูุฏ.

```bash
cd dockerfile
docker build -t nginx-devops .
```

### 1. ุงุฌุฑุง ุณุฑูุฑูุง NGINX

```bash
cd ../nginx
docker-compose up -d
```



### 2. ุงุฌุฑุง ุฑูุชุฑูุง


```bash
cd ../routers
docker-compose up -d
```


### 3. ุงุฌุฑุง ฺฉูุงูุช

```bash
cd ../client
docker-compose up -d
```

## ๐งช ุชุณุช ุนููฺฉุฑุฏ

### ุงุชุตุงู ุงุฒ ุฏุงุฎู ฺฉูุงูุช

```bash
docker exec -it client bash
curl http://192.168.10.100
```

ุจุฑ ุงุณุงุณ ูุณุฑูุง BGPุ ฺฉูุงูุช ุจู ูุฒุฏฺฉโุชุฑู ุณุฑูุฑ ูุฏุงุช ูโุดูุฏ.

## ๐ก ุชุนุฑู Anycastุ

ููููู Anycast ุจู ุญุงูุช ฺฏูุชู ูโุดูุฏ ฺฉู ฺูุฏู ุณุฑูุฑ ฺฉ IP ฺฉุณุงู ุฏุงุฑูุฏุ ู ุจุณุชูโูุง ุจูโุตูุฑุช **ูุณุฑ ฺฉูุชุงูโุชุฑ** ุจู ูุฒุฏฺฉโุชุฑู ุณุฑูุฑ ุงุฒ ูุธุฑ BGP ุงุฑุณุงู ูโุดููุฏ.


## ๐ฐ๏ธุจุฑุฑุณ  FRRouting ู BGP


ฺฉ ูพฺฉุฌ ูุณุฑุงุจ ููุจุนโุจุงุฒ ุงุณุช ฺฉู ุงุฒ ูพุฑูุชฺฉูโูุง ูุซู BGPุ OSPFุ ู IS-IS ูพุดุชุจุงู ูโฺฉูุฏ.

## ๐ง ููุงุฑุฏ ูุงุจู ุขุฒูุงุด

- ุฎุงููุด ฺฉุฑุฏู ฺฉ ุฑูุชุฑ ู ูุดุงูุฏู failover
- ุชุบุฑ ุฏุงุฏู local preference ุง AS path ุจุฑุง ุชุงุซุฑ ุจุฑ ุงูุชุฎุงุจ ูุณุฑ
- ุจุฑุฑุณ ุงูฺฉู ุฏุฑ ุตูุฑุช delay ูุตููุนุ ฺฉุฏุงู ูุณุฑ ุงูุชุฎุงุจ ูโุดูุฏ


## ๐จโ๐ป ุชูุณุนูโุฏููุฏู

ุงู ูพุฑูฺู ุชูุณุท **ูุญูุฏุฑุถุง** ุทุฑุงุญ ุดุฏู ุงุณุช โ ุจุง ูุฏู ุงุฏฺฏุฑ ุนูู ููุงูู ุดุจฺฉู ู BGP ุจู ฺฉูฺฉ ุงุจุฒุงุฑูุง ุฑูุฒ ูุซู Docker.
